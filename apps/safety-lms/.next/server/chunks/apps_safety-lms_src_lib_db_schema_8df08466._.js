module.exports=[22073,14645,50400,e=>{"use strict";e.s(["progress",()=>o,"progressRelations",()=>p],22073);var t=e.i(16627),s=e.i(62223),l=e.i(31861),i=e.i(77286),r=e.i(81434),n=e.i(29738),u=e.i(70178),a=e.i(55923),d=e.i(15885);let o=(0,t.pgTable)("progress",{id:(0,s.uuid)("id").primaryKey().defaultRandom(),userId:(0,s.uuid)("user_id").notNull().references(()=>u.profiles.id),courseId:(0,s.uuid)("course_id").notNull().references(()=>a.courses.id),plantId:(0,s.uuid)("plant_id").notNull().references(()=>d.plants.id),progressPercent:(0,r.integer)("progress_percent").default(0).notNull(),currentSection:(0,l.text)("current_section"),lastActiveAt:(0,i.timestamp)("last_active_at").defaultNow().notNull(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()}),p=(0,n.relations)(o,({one:e})=>({user:e(u.profiles,{fields:[o.userId],references:[u.profiles.id]}),course:e(a.courses,{fields:[o.courseId],references:[a.courses.id]}),plant:e(d.plants,{fields:[o.plantId],references:[d.plants.id]})}));e.s(["activityEvents",()=>f,"activityEventsRelations",()=>N,"eventTypeEnum",()=>m],14645);var c=e.i(66392);let m=(0,e.i(33368).pgEnum)("event_type",["view_section","start_course","complete_course"]),f=(0,t.pgTable)("activity_events",{id:(0,s.uuid)("id").primaryKey().defaultRandom(),userId:(0,s.uuid)("user_id").notNull().references(()=>u.profiles.id),courseId:(0,s.uuid)("course_id").notNull().references(()=>a.courses.id),plantId:(0,s.uuid)("plant_id").notNull().references(()=>d.plants.id),eventType:m("event_type").notNull(),meta:(0,c.jsonb)("meta"),occurredAt:(0,i.timestamp)("occurred_at").defaultNow().notNull(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull()}),N=(0,n.relations)(f,({one:e})=>({user:e(u.profiles,{fields:[f.userId],references:[u.profiles.id]}),course:e(a.courses,{fields:[f.courseId],references:[a.courses.id]}),plant:e(d.plants,{fields:[f.plantId],references:[d.plants.id]})}));e.s(["questionEvents",()=>v,"questionEventsRelations",()=>y],50400);var _=e.i(73835);let v=(0,t.pgTable)("question_events",{id:(0,s.uuid)("id").primaryKey().defaultRandom(),userId:(0,s.uuid)("user_id").notNull().references(()=>u.profiles.id),courseId:(0,s.uuid)("course_id").notNull().references(()=>a.courses.id),plantId:(0,s.uuid)("plant_id").notNull().references(()=>d.plants.id),sectionKey:(0,l.text)("section_key").notNull(),questionKey:(0,l.text)("question_key").notNull(),isCorrect:(0,_.boolean)("is_correct").notNull(),attemptIndex:(0,r.integer)("attempt_index").default(1).notNull(),responseMeta:(0,c.jsonb)("response_meta"),answeredAt:(0,i.timestamp)("answered_at").defaultNow().notNull(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull()}),y=(0,n.relations)(v,({one:e})=>({user:e(u.profiles,{fields:[v.userId],references:[u.profiles.id]}),course:e(a.courses,{fields:[v.courseId],references:[a.courses.id]}),plant:e(d.plants,{fields:[v.plantId],references:[d.plants.id]})}))},70178,15603,15885,e=>{"use strict";e.s(["profiles",()=>I,"profilesRelations",()=>g,"userStatusEnum",()=>y],70178);var t=e.i(16627),s=e.i(62223),l=e.i(31861),i=e.i(77286),r=e.i(33368),n=e.i(29738);e.s(["plants",()=>_,"plantsRelations",()=>v],15885);var u=e.i(73835),a=e.i(55923),d=e.i(66705),o=e.i(22073),p=e.i(14645),c=e.i(50400);e.s(["adminRoleEnum",()=>m,"adminRoles",()=>f,"adminRolesRelations",()=>N],15603);let m=(0,r.pgEnum)("admin_role",["hr_admin","dev_admin","plant_manager"]),f=(0,t.pgTable)("admin_roles",{id:(0,s.uuid)("id").primaryKey().defaultRandom(),userId:(0,s.uuid)("user_id").notNull().references(()=>I.id),role:m("role").notNull(),plantId:(0,s.uuid)("plant_id").references(()=>_.id),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()}),N=(0,n.relations)(f,({one:e})=>({user:e(I,{fields:[f.userId],references:[I.id]}),plant:e(_,{fields:[f.plantId],references:[_.id]})})),_=(0,t.pgTable)("plants",{id:(0,s.uuid)("id").primaryKey().defaultRandom(),name:(0,l.text)("name").notNull().unique(),isActive:(0,u.boolean)("is_active").default(!0).notNull(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()}),v=(0,n.relations)(_,({many:e})=>({profiles:e(I),courses:e(a.courses),enrollments:e(d.enrollments),progress:e(o.progress),activityEvents:e(p.activityEvents),questionEvents:e(c.questionEvents),adminRoles:e(f)})),y=(0,r.pgEnum)("user_status",["active","suspended"]),I=(0,t.pgTable)("profiles",{id:(0,s.uuid)("id").primaryKey(),plantId:(0,s.uuid)("plant_id").notNull().references(()=>_.id),firstName:(0,l.text)("first_name").notNull(),lastName:(0,l.text)("last_name").notNull(),email:(0,l.text)("email").notNull(),jobTitle:(0,l.text)("job_title"),status:y("status").default("active").notNull(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()}),g=(0,n.relations)(I,({one:e,many:t})=>({plant:e(_,{fields:[I.plantId],references:[_.id]})}))},66705,e=>{"use strict";e.s(["enrollmentStatusEnum",()=>d,"enrollments",()=>o,"enrollmentsRelations",()=>p]);var t=e.i(16627),s=e.i(62223),l=e.i(77286),i=e.i(33368),r=e.i(29738),n=e.i(70178),u=e.i(55923),a=e.i(15885);let d=(0,i.pgEnum)("enrollment_status",["enrolled","in_progress","completed"]),o=(0,t.pgTable)("enrollments",{id:(0,s.uuid)("id").primaryKey().defaultRandom(),userId:(0,s.uuid)("user_id").notNull().references(()=>n.profiles.id),courseId:(0,s.uuid)("course_id").notNull().references(()=>u.courses.id),plantId:(0,s.uuid)("plant_id").notNull().references(()=>a.plants.id),status:d("status").default("enrolled").notNull(),enrolledAt:(0,l.timestamp)("enrolled_at").defaultNow().notNull(),completedAt:(0,l.timestamp)("completed_at"),createdAt:(0,l.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,l.timestamp)("updated_at").defaultNow().notNull()}),p=(0,r.relations)(o,({one:e})=>({user:e(n.profiles,{fields:[o.userId],references:[n.profiles.id]}),course:e(u.courses,{fields:[o.courseId],references:[u.courses.id]}),plant:e(a.plants,{fields:[o.plantId],references:[a.plants.id]})}))},55923,e=>{"use strict";e.s(["courses",()=>p,"coursesRelations",()=>c]);var t=e.i(16627),s=e.i(62223),l=e.i(31861),i=e.i(77286),r=e.i(73835),n=e.i(29738),u=e.i(66705),a=e.i(22073),d=e.i(14645),o=e.i(50400);let p=(0,t.pgTable)("courses",{id:(0,s.uuid)("id").primaryKey().defaultRandom(),slug:(0,l.text)("slug").notNull().unique(),title:(0,l.text)("title").notNull(),version:(0,l.text)("version").default("1.0").notNull(),isPublished:(0,r.boolean)("is_published").default(!1).notNull(),createdAt:(0,i.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at").defaultNow().notNull()}),c=(0,n.relations)(p,({many:e})=>({enrollments:e(u.enrollments),progress:e(a.progress),activityEvents:e(d.activityEvents),questionEvents:e(o.questionEvents)}))}];

//# sourceMappingURL=apps_safety-lms_src_lib_db_schema_8df08466._.js.map