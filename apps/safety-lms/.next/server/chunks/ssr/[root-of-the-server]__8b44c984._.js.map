{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jshepherd/OneDrive%20-%20SpecChem%2C%20LLC/Desktop/specchem-safety-lms-v2-main/apps/safety-lms/src/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient, type CookieOptions } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\nimport { cache } from \"react\";\n\nexport const createClient = cache(async () => {\n  const cookieStore = await cookies();\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value;\n        },\n        set(name: string, value: string, options: CookieOptions) {\n          try {\n            cookieStore.set({ name, value, ...options });\n          } catch (error) {\n            // The `cookies().set()` method can only be called from a Server Component or Server Action.\n            // This error can be ignored if you are running tests that don't have a Server Component.\n          }\n        },\n        remove(name: string, options: CookieOptions) {\n          try {\n            cookieStore.set({ name, value: \"\", ...options });\n          } catch (error) {\n            // The `cookies().set()` method can only be called from a Server Component or Server Action.\n            // This error can be ignored if you are running tests that don't have a Server Component.\n          }\n        },\n      },\n    }\n  );\n});\n\n// Legacy export for backward compatibility\nexport const createServerSupabaseClient = createClient;\n\n// Server auth helper for API routes\nexport const serverAuth = {\n  async getCurrentUser() {\n    const supabase = await createClient();\n    const { data: { user }, error } = await supabase.auth.getUser();\n\n    if (error || !user) {\n      return { user: null, profile: null };\n    }\n\n    // Get user profile from profiles table\n    const { data: profile, error: profileError } = await supabase\n      .from(\"profiles\")\n      .select(\"*\")\n      .eq(\"auth_user_id\", user.id)\n      .single();\n\n    if (profileError) {\n      console.error(\"Error fetching user profile:\", profileError);\n      return { user, profile: null };\n    }\n\n    return { user, profile };\n  }\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AACA;;;;AAEO,MAAM,eAAe,IAAA,6UAAK,EAAC;IAChC,MAAM,cAAc,MAAM,IAAA,yQAAO;IAEjC,OAAO,IAAA,4SAAkB,sUAGvB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM;wBAAO,GAAG,OAAO;oBAAC;gBAC5C,EAAE,OAAO,OAAO;gBACd,4FAA4F;gBAC5F,yFAAyF;gBAC3F;YACF;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM,OAAO;wBAAI,GAAG,OAAO;oBAAC;gBAChD,EAAE,OAAO,OAAO;gBACd,4FAA4F;gBAC5F,yFAAyF;gBAC3F;YACF;QACF;IACF;AAEJ;AAGO,MAAM,6BAA6B;AAGnC,MAAM,aAAa;IACxB,MAAM;QACJ,MAAM,WAAW,MAAM;QACvB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAE7D,IAAI,SAAS,CAAC,MAAM;YAClB,OAAO;gBAAE,MAAM;gBAAM,SAAS;YAAK;QACrC;QAEA,uCAAuC;QACvC,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SAClD,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,gBAAgB,KAAK,EAAE,EAC1B,MAAM;QAET,IAAI,cAAc;YAChB,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,OAAO;gBAAE;gBAAM,SAAS;YAAK;QAC/B;QAEA,OAAO;YAAE;YAAM;QAAQ;IACzB;AACF","debugId":null}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jshepherd/OneDrive%20-%20SpecChem%2C%20LLC/Desktop/specchem-safety-lms-v2-main/apps/safety-lms/src/app/courses/%5Bslug%5D/learn/page.tsx"],"sourcesContent":["import { redirect } from \"next/navigation\";\nimport { createClient } from \"@/lib/supabase/server\";\nimport { AlertCircle, BookOpen } from \"lucide-react\";\n\nexport default async function CourseLearningPage({ \n  params \n}: { \n  params: Promise<{ slug: string }> \n}) {\n  const supabase = await createClient();\n  const { slug } = await params;\n\n  // Fetch course details\n  const { data: course, error: courseError } = await supabase\n    .from(\"courses\")\n    .select(\"id, title\")\n    .eq(\"slug\", slug)\n    .single();\n\n  if (courseError || !course) {\n    console.error(\"Error fetching course:\", courseError);\n    return (\n      <div className=\"text-center py-12\">\n        <AlertCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium mb-2 text-neutral-900 dark:text-neutral-100\">\n          Error Loading Course\n        </h3>\n        <p className=\"text-neutral-600 dark:text-neutral-400 mb-4\">\n          {courseError?.message || \"Course not found or an unexpected error occurred.\"}\n        </p>\n      </div>\n    );\n  }\n\n  // Fetch sections for the course\n  const { data: sections, error: sectionsError } = await supabase\n    .from(\"course_sections\")\n    .select(\"id, title, order_index\")\n    .eq(\"course_id\", course.id)\n    .order(\"order_index\", { ascending: true });\n\n  if (sectionsError) {\n    console.error(\"Error fetching sections:\", sectionsError);\n    return (\n      <div className=\"text-center py-12\">\n        <AlertCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium mb-2 text-neutral-900 dark:text-neutral-100\">\n          Error Loading Sections\n        </h3>\n        <p className=\"text-neutral-600 dark:text-neutral-400 mb-4\">\n          {sectionsError.message || \"An unexpected error occurred while loading sections.\"}\n        </p>\n      </div>\n    );\n  }\n\n  // If no sections, display a message\n  if (!sections || sections.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <BookOpen className=\"h-12 w-12 text-neutral-400 mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium mb-2 text-neutral-900 dark:text-neutral-100\">\n          Course Content Coming Soon\n        </h3>\n        <p className=\"text-neutral-600 dark:text-neutral-400 mb-4\">\n          This course doesn't have any sections yet. Content is being prepared.\n        </p>\n      </div>\n    );\n  }\n\n  // Redirect to the first section\n  redirect(`/courses/${slug}/learn/${sections[0].id}`);\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;AAAA;;;;;AAEe,eAAe,mBAAmB,EAC/C,MAAM,EAGP;IACC,MAAM,WAAW,MAAM,IAAA,yKAAY;IACnC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IAEvB,uBAAuB;IACvB,MAAM,EAAE,MAAM,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAChD,IAAI,CAAC,WACL,MAAM,CAAC,aACP,EAAE,CAAC,QAAQ,MACX,MAAM;IAET,IAAI,eAAe,CAAC,QAAQ;QAC1B,QAAQ,KAAK,CAAC,0BAA0B;QACxC,qBACE,6WAAC;YAAI,WAAU;;8BACb,6WAAC,uTAAW;oBAAC,WAAU;;;;;;8BACvB,6WAAC;oBAAG,WAAU;8BAAkE;;;;;;8BAGhF,6WAAC;oBAAE,WAAU;8BACV,aAAa,WAAW;;;;;;;;;;;;IAIjC;IAEA,gCAAgC;IAChC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,SACpD,IAAI,CAAC,mBACL,MAAM,CAAC,0BACP,EAAE,CAAC,aAAa,OAAO,EAAE,EACzB,KAAK,CAAC,eAAe;QAAE,WAAW;IAAK;IAE1C,IAAI,eAAe;QACjB,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,qBACE,6WAAC;YAAI,WAAU;;8BACb,6WAAC,uTAAW;oBAAC,WAAU;;;;;;8BACvB,6WAAC;oBAAG,WAAU;8BAAkE;;;;;;8BAGhF,6WAAC;oBAAE,WAAU;8BACV,cAAc,OAAO,IAAI;;;;;;;;;;;;IAIlC;IAEA,oCAAoC;IACpC,IAAI,CAAC,YAAY,SAAS,MAAM,KAAK,GAAG;QACtC,qBACE,6WAAC;YAAI,WAAU;;8BACb,6WAAC,8SAAQ;oBAAC,WAAU;;;;;;8BACpB,6WAAC;oBAAG,WAAU;8BAAkE;;;;;;8BAGhF,6WAAC;oBAAE,WAAU;8BAA8C;;;;;;;;;;;;IAKjE;IAEA,gCAAgC;IAChC,IAAA,gUAAQ,EAAC,CAAC,SAAS,EAAE,KAAK,OAAO,EAAE,QAAQ,CAAC,EAAE,CAAC,EAAE,EAAE;AACrD","debugId":null}}]
}