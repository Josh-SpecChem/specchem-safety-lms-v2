(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27833,e=>{"use strict";e.s(["Loader2",()=>s],27833);let s=(0,e.i(13378).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},41374,e=>{"use strict";e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>c,"CardHeader",()=>l,"CardTitle",()=>n]);var s=e.i(78196),a=e.i(49430),t=e.i(83711);let r=a.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...l})});r.displayName="Card";let l=a.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",r),...l})});l.displayName="CardHeader";let n=a.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",r),...l})});n.displayName="CardTitle";let c=a.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,t.cn)("text-sm text-muted-foreground",r),...l})});c.displayName="CardDescription";let i=a.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,t.cn)("p-6 pt-0",r),...l})});i.displayName="CardContent",a.forwardRef((e,a)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:a,className:(0,t.cn)("flex items-center p-6 pt-0",r),...l})}).displayName="CardFooter"},22277,e=>{"use strict";e.s(["Badge",()=>l]);var s=e.i(78196),a=e.i(94237),t=e.i(83711);let r=(0,a.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:l,...n}=e;return(0,s.jsx)("div",{className:(0,t.cn)(r({variant:l}),a),...n})}},2708,e=>{"use strict";e.s(["CheckCircle",()=>s],2708);let s=(0,e.i(13378).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},21679,e=>{"use strict";e.s(["default",()=>j],21679);var s=e.i(78196),a=e.i(47370),t=e.i(36660),r=e.i(49430),l=e.i(41374),n=e.i(22277),c=e.i(24924),i=e.i(80441),d=e.i(31176),o=e.i(10437),x=e.i(81949),m=e.i(2708),h=e.i(40043),u=e.i(6823),f=e.i(27833);function j(){var e,j;let{user:g,profile:p,isAuthenticated:N,getFullName:v,getRole:C,getPermissions:b}=(0,a.useUser)(),{signOut:w}=(0,t.useAuth)(),{stats:y,loading:T}=function(){let[e,s]=(0,r.useState)({totalEnrollments:0,completedCourses:0,inProgressCourses:0,certificates:0}),[a,t]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{t(!0),n(null);let e=await fetch("/api/stats/dashboard");if(!e.ok)throw Error("Failed to fetch stats: ".concat(e.statusText));let a=await e.json();if(!a.success)throw Error(a.error||"Failed to fetch stats");s(a.data)}catch(e){console.error("Error fetching dashboard stats:",e),n(e instanceof Error?e.message:"Failed to fetch stats")}finally{t(!1)}})()},[]),{stats:e,loading:a,error:l,refetch:()=>{}}}();if(!N())return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"h-16 w-16 rounded-full bg-gradient-to-r from-primary-500 to-secondary-500 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(u.Shield,{className:"h-8 w-8 text-white"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-neutral-900 mb-4",children:"Loading..."}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Please wait while we load your dashboard."})]})});let M=b();return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-neutral-900",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-neutral-600 mt-2",children:["Welcome back, ",v(),"!"]})]}),(0,s.jsx)(n.Badge,{variant:"secondary",className:"px-4 py-2",children:(null==(e=C())?void 0:e.charAt(0).toUpperCase())+(null==(j=C())?void 0:j.slice(1))})]}),T?(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,s.jsx)(f.Loader2,{className:"h-8 w-8 animate-spin text-primary-600"}),(0,s.jsx)("span",{className:"ml-3 text-neutral-600",children:"Loading statistics..."})]}):(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-neutral-600",children:"Total Enrollments"}),(0,s.jsx)(i.BookOpen,{className:"h-4 w-4 text-primary-600"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-neutral-900",children:y.totalEnrollments}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"Active course enrollments"})]})]}),(0,s.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-neutral-600",children:"Completed"}),(0,s.jsx)(m.CheckCircle,{className:"h-4 w-4 text-accent-green-600"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-neutral-900",children:y.completedCourses}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"Courses finished"})]})]}),(0,s.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-neutral-600",children:"In Progress"}),(0,s.jsx)(h.TrendingUp,{className:"h-4 w-4 text-accent-orange-600"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-neutral-900",children:y.inProgressCourses}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"Active learning"})]})]}),(0,s.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-neutral-600",children:"Certificates"}),(0,s.jsx)(u.Shield,{className:"h-4 w-4 text-secondary-600"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-neutral-900",children:y.certificates}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"Safety certifications"})]})]})]}),(0,s.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"text-xl font-semibold text-neutral-900",children:"Account Information"}),(0,s.jsx)(l.CardDescription,{children:"Your profile and account details"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Name"}),(0,s.jsx)("p",{className:"text-neutral-900 font-medium",children:v()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Email"}),(0,s.jsx)("p",{className:"text-neutral-900 font-medium",children:null==g?void 0:g.email})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Role"}),(0,s.jsx)("p",{className:"text-neutral-900 font-medium capitalize",children:C()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Plant"}),(0,s.jsx)("p",{className:"text-neutral-900 font-medium",children:(null==p?void 0:p.plant_id)||"Not assigned"})]})]})]})})]}),M&&(0,s.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"text-xl font-semibold text-neutral-900",children:"Your Permissions"}),(0,s.jsx)(l.CardDescription,{children:"Access levels and capabilities"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(M.canManageUsers?"bg-accent-green-500":"bg-neutral-300")}),(0,s.jsx)("span",{className:"text-neutral-900",children:"Manage Users"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(M.canManageCourses?"bg-accent-green-500":"bg-neutral-300")}),(0,s.jsx)("span",{className:"text-neutral-900",children:"Manage Courses"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(M.canManagePlants?"bg-accent-green-500":"bg-neutral-300")}),(0,s.jsx)("span",{className:"text-neutral-900",children:"Manage Plants"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(M.canViewReports?"bg-accent-green-500":"bg-neutral-300")}),(0,s.jsx)("span",{className:"text-neutral-900",children:"View Reports"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(M.canManageEnrollments?"bg-accent-green-500":"bg-neutral-300")}),(0,s.jsx)("span",{className:"text-neutral-900",children:"Manage Enrollments"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(M.canViewAllData?"bg-accent-green-500":"bg-neutral-300")}),(0,s.jsx)("span",{className:"text-neutral-900",children:"View All Data"})]})]})})]}),(0,s.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"text-xl font-semibold text-neutral-900",children:"Quick Actions"}),(0,s.jsx)(l.CardDescription,{children:"Common tasks and navigation shortcuts"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(c.Button,{asChild:!0,className:"h-20 flex-col space-y-2 bg-primary-500 hover:bg-primary-600",children:(0,s.jsxs)("a",{href:"/courses",children:[(0,s.jsx)(i.BookOpen,{className:"h-6 w-6"}),(0,s.jsx)("span",{className:"font-medium",children:"View Courses"})]})}),(null==M?void 0:M.canViewReports)&&(0,s.jsx)(c.Button,{asChild:!0,className:"h-20 flex-col space-y-2 bg-accent-green-500 hover:bg-accent-green-600",children:(0,s.jsxs)("a",{href:"/reports",children:[(0,s.jsx)(d.BarChart3,{className:"h-6 w-6"}),(0,s.jsx)("span",{className:"font-medium",children:"View Reports"})]})}),(null==M?void 0:M.canManageUsers)&&(0,s.jsx)(c.Button,{asChild:!0,className:"h-20 flex-col space-y-2 bg-secondary-600 hover:bg-secondary-700",children:(0,s.jsxs)("a",{href:"/users",children:[(0,s.jsx)(o.Users,{className:"h-6 w-6"}),(0,s.jsx)("span",{className:"font-medium",children:"Manage Users"})]})}),(null==M?void 0:M.canManagePlants)&&(0,s.jsx)(c.Button,{asChild:!0,className:"h-20 flex-col space-y-2 bg-accent-orange-500 hover:bg-accent-orange-600",children:(0,s.jsxs)("a",{href:"/plants",children:[(0,s.jsx)(x.Building2,{className:"h-6 w-6"}),(0,s.jsx)("span",{className:"font-medium",children:"Manage Plants"})]})})]})})]})]})}}]);